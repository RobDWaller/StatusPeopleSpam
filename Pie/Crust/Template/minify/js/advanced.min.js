$(document).ready(function(){function e(){$("#scoresholder").length&&$("#scoresholder").remove(),$("#shareform").length&&$("#shareform").remove();var e=$("<div/>");e.attr("id","scoresholder"),e.addClass("row"),e.insertBefore("#SearchForm")}function t(e,t){var a=$("<div/>");a.attr("id","loader"),a.html("<h1>"+e+"</h1>"),a.attr("class","row connect center");var s=$("<img/>");s.attr("src","/Pie/Crust/Template/img/287.gif"),s.attr("id","imageloader"),s.appendTo(a),a.appendTo(t)}function a(){$("#GetScoresForms").remove(),e(),t("Getting Faker Scores","#scoresholder");var a=parseInt($("#firsttime").val());1==a?n.CallServer("GET","json","/API/GetSpamRecords","rf=json&usr="+encodeURIComponent(s)+"&srch="+o,"Spam_ProcessSpamDataFirstTime",s):n.CallServer("GET","json","/API/GetCachedSpamScore","rf=json&usr="+encodeURIComponent(s),"Spam_ProcessCachedSpamData",1)}var s=$("#twitterid").val(),o=$("#twitterhandle").val(),r=$("#accounttype").val(),n=new Server,i=new Popup,d=new Scroll,l=new Lengths;if($("#searchsubmit").bind("click",function(a){a.preventDefault(),$(this).attr("disabled","disabled");var o=$("#searchquery").val(),r=l.StringLength(o);r>0?(e(),t("Getting Faker Scores","#scoresholder"),$("#handle").text(o),n.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+encodeURIComponent(s)+"&srch="+o+"&srchs=3","Spam_ProcessSpamDataAdvanced",s)):(i.Loader(),i.AddMessage("Please enter a Twitter username to search for.",!0),$(this).removeAttr("disabled"))}),$(document).on("click","#resetscores",function(a){a.preventDefault(),e(),t("Getting Faker Scores","#scoresholder"),$("#handle").text(o),$("#searchquery").val(""),$("#searchquery").attr("placeholder","Twitter username..."),n.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+encodeURIComponent(s)+"&srch="+o,"Spam_ProcessSpamData",3)}),$(document).on("click","#addfaker",function(a){a.preventDefault();var r=$("#searchquery").val(),i=$("#spam").val(),d=$("#potential").val(),l=$("#checks").val(),c=$("#followers").val();n.CallServer("POST","json","/API/PostAddFaker","rf=json&usr="+encodeURIComponent(s)+"&srch="+r+"&sp="+i+"&pt="+d+"&ch="+l+"&fl="+c,"Spam_AddFaker",s),e(),t("Getting Faker Scores","#scoresholder"),$("#handle").text(o),$("#searchquery").val(""),$("#searchquery").attr("placeholder","Twitter username..."),n.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+encodeURIComponent(s)+"&srch="+o,"Spam_ProcessSpamData",3)}),$(document).on("click",".details",function(e){e.preventDefault();var t=$(this).parent().parent(),a=t.children(".sc"),o=a.val();i.Loader("Loading..."),n.CallServer("GET","json","/API/GetTwitterUserData","rf=json&usr="+encodeURIComponent(s)+"&srch="+o,"Spam_BuildUser","")}),$(document).on("click",".block",function(e){e.preventDefault();var t=$(this).parent().parent(),a=t.children(".ti"),o=a.val();n.CallServer("POST","json","/API/PostBlockSpam","rf=json&usr="+encodeURIComponent(s)+"&twid="+o,"Spam_BlockUser",s)}),$(document).on("click",".unblock",function(e){e.preventDefault();var t=$(this).parent().parent(),a=t.children(".ti"),o=a.val();n.CallServer("POST","json","/API/PostUnBlockSpam","rf=json&usr="+encodeURIComponent(s)+"&twid="+o,"Spam_UnBlockUser",s)}),$(document).on("click",".notspam",function(e){e.preventDefault();var t=$(this).parent().parent(),a=t.children(".ti"),o=a.val();n.CallServer("POST","json","/API/PostNotSpam","rf=json&usr="+encodeURIComponent(s)+"&twid="+o,"Spam_NotSpam",s)}),$(document).on("click",".tweetfollowers",function(e){e.preventDefault();var t=$(this).attr("href"),a=t.split("//"),o=a[1].split("/");i.Loader("Loading..."),n.CallServer("GET","json","/API/GetFollowerData","rf=json&usr="+encodeURIComponent(s)+"&ct=10&nm="+o[1],"Tweets_Followers")}),$(document).on("click",".usertweettimeline",function(e){e.preventDefault(),i.Loader("Loading..."),i.Content("");var t=$(this).attr("href"),a=t.split("/");n.CallServer("GET","json","/API/GetUserTwitterTimeline","rf=json&usr="+encodeURIComponent(s)+"&srch="+a[3]+"&cnt=10","Tweets_BuildUserTimeline")}),$(document).on("click","#chartreset",function(){$("#charthandle").text(o),n.CallServer("GET","json","/API/GetSpamScoresOverTime","rf=json&usr="+encodeURIComponent(s),"Charts_BuildChart"),d.To("#charthandle",500,10),$(this).fadeOut(1e3,function(){$(this).remove()})}),$(document).on("click","#checkfakes",function(){i.TinyLoader(),n.CallServer("GET","json","/API/GetUpdateFakersList","rf=json&usr="+encodeURIComponent(s)+"&srch="+o,"Spam_UpdateFakersList",s)}),$("#searchblocked").bind("click",function(){i.BuildPopup(),i.Content('<p>Search Your Blocked Users<p><form><fieldset><input type="text" id="searchforblocked" /></fieldset></form><div id="blocksearchdata"></div>')}),$(document).on("keyup","#searchforblocked",function(){var e=$(this).val();n.CallServer("POST","json","/API/PostBlockedSearch","rf=json&usr="+encodeURIComponent(s)+"&srch="+e,"Spam_ProcessFakerFind")}),$(document).on("mouseup","#searchforblocked",function(){var e=$(this).val();n.CallServer("POST","json","/API/PostBlockedSearch","rf=json&usr="+encodeURIComponent(s)+"&srch="+e,"Spam_ProcessFakerFind")}),$(document).on("click","#autoon",function(e){e.preventDefault(),i.BuildPopup();var t=$('<div><p>If you turn on auto-blocking it will cause the Fakers App to begin blocking your fake followers as we find them. You can search and unblock any follower at any time if you think we have got it wrong.</p><p>In addition if you have a lot of fake followers &mdash; tens of thousands &mdash; it may take a number of days or even weeks before you notice a significant improvement in your scores. Your scores may also fluctuate during this period. <strong>Please confirm you wish to turn on auto-blocking</strong></p><form><fieldset><input id="confirmautoon" value="Confirm" type="button"/></fieldset></form></div>');i.Content(t)}),$(document).on("click","#autooff",function(e){e.preventDefault(),i.TinyLoader(),n.CallServer("POST","json","/API/PostChangeAutoRemoveStatus","rf=json&usr="+encodeURIComponent(s),"Spam_AutoBlockUpdate")}),$(document).on("click","#confirmautoon",function(e){e.preventDefault(),i.TinyLoader(),n.CallServer("POST","json","/API/PostChangeAutoRemoveStatus","rf=json&usr="+encodeURIComponent(s),"Spam_AutoBlockUpdate")}),$(document).on("click","#gotopremium",function(e){e.preventDefault(),window.location="/Payments/Subscriptions?type=2"}),1==r){i.BuildRightInfoBox();var c=$('<p><strong>Auto Block</strong></p><p>To Auto Block your Fake Followers and track up to 15 Friends upgrade to a Premium subscription.</p><form><fieldset><input type="button" id="gotopremium" value="Go Premium" /></fieldset></form>');i.RightInfoContent(c)}a()});