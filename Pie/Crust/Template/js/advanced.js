$(document).ready(function(){var g=$("#twitterid").val();var c=$("#twitterhandle").val();var b=new Server();var h=new Popup();var f=new Scroll();var d=new Lengths();function e(){if($("#scoresholder").length){$("#scoresholder").remove()}if($("#shareform").length){$("#shareform").remove()}var j=$("<div/>");j.attr("id","scoresholder");j.addClass("row");j.insertBefore("#SearchForm")}function a(m,l){var j=$("<div/>");j.attr("id","loader");j.html("<h1>"+m+"</h1>");j.attr("class","row connect center");var k=$("<img/>");k.attr("src","/Pie/Crust/Template/img/287.gif");k.attr("id","imageloader");k.appendTo(j);j.appendTo(l)}function i(){$("#GetScoresForms").remove();e();a("Getting Faker Scores","#scoresholder");var j=parseInt($("#firsttime").val());if(j==1){b.CallServer("GET","json","/API/GetSpamRecords","rf=json&usr="+g+"&srch="+c,"Spam_ProcessSpamDataFirstTime",g)}else{b.CallServer("GET","json","/API/GetCachedSpamScore","rf=json&usr="+g,"Spam_ProcessCachedSpamData",1)}}$("#searchsubmit").bind("click",function(k){k.preventDefault();$(this).attr("disabled","disabled");var l=$("#searchquery").val();var j=d.StringLength(l);if(j>0){e();a("Getting Faker Scores","#scoresholder");b.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+g+"&srch="+l+"&srchs=3","Spam_ProcessSpamDataAdvanced",g)}else{h.Loader();h.AddMessage("Please enter a Twitter username to search for.",true);$(this).removeAttr("disabled")}});$(document).on("click","#resetscores",function(j){j.preventDefault();e();a("Getting Faker Scores","#scoresholder");$("#handle").text(c);$("#searchquery").val("");$("#searchquery").attr("placeholder","Twitter username...");b.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+g+"&srch="+c,"Spam_ProcessSpamData",3)});$(document).on("click","#addfaker",function(n){n.preventDefault();var o=$("#searchquery").val();var m=$("#spam").val();var j=$("#potential").val();var k=$("#checks").val();var l=$("#followers").val();b.CallServer("POST","json","/API/PostAddFaker","rf=json&usr="+g+"&srch="+o+"&sp="+m+"&pt="+j+"&ch="+k+"&fl="+l,"Spam_AddFaker",g);e();a("Getting Faker Scores","#scoresholder");$("#handle").text(c);$("#searchquery").val("");$("#searchquery").attr("placeholder","Twitter username...");b.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+g+"&srch="+c,"Spam_ProcessSpamData",3)});$(document).on("click","#addfakerpopup",function(n){n.preventDefault();var o=$("#friendsearchname").text();var m=$("#spam").val();var j=$("#potential").val();var k=$("#checks").val();var l=$("#followers").val();b.CallServer("POST","json","/API/PostAddFaker","rf=json&usr="+g+"&srch="+o+"&sp="+m+"&pt="+j+"&ch="+k+"&fl="+l,"Spam_AddFaker",g);h.RemovePopup()});$(document).on("click",".details",function(m){m.preventDefault();var j=$(this).parent().parent();var k=j.children(".sc");var l=k.val();h.Loader("Loading...");b.CallServer("GET","json","/API/GetTwitterUserData","rf=json&usr="+g+"&srch="+l,"Spam_BuildUser","")});$(document).on("click",".block",function(m){m.preventDefault();var j=$(this).parent().parent();var k=j.children(".ti");var l=k.val();b.CallServer("POST","json","/API/PostBlockSpam","rf=json&usr="+g+"&twid="+l,"Spam_BlockUser",g)});$(document).on("click",".unblock",function(m){m.preventDefault();var j=$(this).parent().parent();var k=j.children(".ti");var l=k.val();b.CallServer("POST","json","/API/PostUnBlockSpam","rf=json&usr="+g+"&twid="+l,"Spam_UnBlockUser",g)});$(document).on("click",".notspam",function(m){m.preventDefault();var j=$(this).parent().parent();var k=j.children(".ti");var l=k.val();b.CallServer("POST","json","/API/PostNotSpam","rf=json&usr="+g+"&twid="+l,"Spam_NotSpam",g)});$(document).on("click",".tweetfollowers",function(l){l.preventDefault();var j=$(this).attr("href");var k=j.split("//");var m=k[1].split("/");h.Loader("Loading...");b.CallServer("GET","json","/API/GetFollowerData","rf=json&usr="+g+"&ct=10&nm="+m[1],"Tweets_Followers")});$(document).on("click",".usertweettimeline",function(k){k.preventDefault();h.Loader("Loading...");h.Content("");var j=$(this).attr("href");var l=j.split("/");b.CallServer("GET","json","/API/GetUserTwitterTimeline","rf=json&usr="+g+"&srch="+l[3]+"&cnt=10","Tweets_BuildUserTimeline")});$(document).on("click","#chartreset",function(){$("#charthandle").text(c);b.CallServer("GET","json","/API/GetSpamScoresOverTime","rf=json&usr="+g,"Charts_BuildChart");f.To("#charthandle",500,10);$(this).fadeOut(1000,function(){$(this).remove()})});$(document).on("click","#checkfakes",function(){h.TinyLoader();b.CallServer("GET","json","/API/GetUpdateFakersList","rf=json&usr="+g+"&srch="+c,"Spam_UpdateFakersList",g)});$(document).on("click","#popupclose",function(){h.RemovePopup()});$(document).on("click","#friendsearch",function(k){k.preventDefault();h.Loader();var j=$('<p>Search for a friend\'s faker score</p><form><fieldset><input type="text" id="friendsearchquery" /></fieldset><fieldset><input type="submit" value="Search" id="searchforfriend" /></fieldset></form>');h.Content(j)});$(document).on("click","#searchforfriend",function(k){k.preventDefault();var l=$("#friendsearchquery").val();var j=d.StringLength(l);if(j>0){h.TinyLoader();b.CallServer("GET","json","/API/GetSpamScores","rf=json&usr="+g+"&srch="+l+"&srchs=3","Spam_ProcessSpamDataPopup",g)}else{h.AddMessage("Please enter a Twitter username to search for",true)}});i()});